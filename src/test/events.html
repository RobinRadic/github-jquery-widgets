<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Github Widgets</title>

    <!-- @include scripts -->

    <script>

        $(function () {
            widgets.events = createWidget('events');

            initEvents();

            function initEvents() {
                $('.events-refresh').on('click', function (e) {
                    widgets.events.widget.githubEvents('refresh');
                });
                $('.events-repaint').on('click', function (e) {
                    widgets.events.widget.githubEvents('repaint');
                });
                widgets.events.widget.githubEvents({
                    username: 'RobinRadic',
                    height: 300,

                    // Add jQuery slimscroll, cause it looks neat
                    repainted: function (e, options) {
                        console.log('repainted', this, e, options);
                        var $wrapper = $(document.createElement('div'));
                        var $container = $(e.target.firstElementChild).wrapInner($wrapper);

                        console.log('he', parseInt($container.css('padding').replace('px')));
                        $($container[0].firstElementChild).slimScroll({
                            height: options.height - (parseInt($container.css('padding').replace('px')) * 2),
                            alwaysVisible: true
                        });
                    }
                });
            }

        })
    </script>

    <style type="text/css">
        .gh-events-widget .slimScrollBar {
            width: 5px !important;
            opacity: 0.3 !important;
            right: 0 !important;
            border-radius: 0 !important;
        }
    </style>
</head>
<body>

<div id="site">
    <div class="container-fluid">
        <!-- @include top -->

        <!-- Github Events -->
        <div class="row">
            <div class="col-md-12">
                <h2>Github Events Widget</h2>

                <div class="btn-toolbar" role="toolbar">
                <div class="btn-group btn-group-xs" role="group">
                    <a href="#" class="btn btn-primary js events-refresh">Refresh</a>
                    <a href="#" class="btn btn-primary js events-repaint">Repaint</a>
                </div>
                    </div>
                <div id="demo-events"></div>
            </div>
        </div>

    </div>
</div>


</body>
</html>
